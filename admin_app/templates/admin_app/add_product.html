{% extends "admin_base.html" %} {% load static %} {% block content %}
<div class="container-xxl py-5">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="fw-bold">Add Product</h2>
      <a href="{% url 'admin_products' %}" class="btn btn-outline-secondary"
        >Back to Products</a
      >
    </div>

    <form
      id="addProductForm"
      method="POST"
      enctype="multipart/form-data"
      class="card p-4 shadow-sm border-0"
    >
      {% csrf_token %}
      <div class="row g-3">
        <!-- Title -->
        <div class="col-md-6">
          <label for="title" class="form-label fw-semibold"
            >Product Title</label
          >
          <input
            type="text"
            name="title"
            id="title"
            class="form-control"
            placeholder="Enter product title"
            required
          />
        </div>

        <!-- Category -->
        <div class="col-md-6">
          <label for="category" class="form-label fw-semibold">Category</label>
          <select name="category" id="category" class="form-select">
            <option value="">Select Category</option>
            {% for cat in categories %}
            <option value="{{ cat.id }}">{{ cat.name }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Description -->
        <div class="col-12">
          <label for="description" class="form-label fw-semibold"
            >Description</label
          >
          <textarea
            name="description"
            id="description"
            class="form-control"
            rows="4"
            placeholder="Write a short description"
          ></textarea>
        </div>

        <!-- Features -->
        <div class="col-12">
          <label class="form-label fw-semibold">Product Features</label>
          <div id="featuresContainer">
            <div class="input-group mb-2">
              <input
                type="text"
                name="feature_0"
                class="form-control feature-input"
                placeholder="Enter a feature (e.g. Fast charging)"
              />
              <button
                type="button"
                class="btn btn-outline-secondary addFeatureBtn"
              >
                +
              </button>
            </div>
          </div>
          <small class="text-muted">Click + to add more feature fields.</small>
        </div>

        <!-- Price -->
        <div class="col-md-4">
          <label for="price" class="form-label fw-semibold">Price (â‚¦)</label>
          <input
            type="number"
            step="0.01"
            name="price"
            id="price"
            class="form-control"
            placeholder="Enter price"
            required
          />
        </div>

        <!-- Discount -->
        <div class="col-md-4">
          <label for="discount" class="form-label fw-semibold"
            >Discount (%)</label
          >
          <input
            type="number"
            step="0.01"
            name="discount"
            id="discount"
            class="form-control"
            placeholder="0.00"
          />
        </div>

        <!-- Inventory -->
        <div class="col-md-4">
          <label for="inventory_count" class="form-label fw-semibold"
            >Inventory Count</label
          >
          <input
            type="number"
            name="inventory_count"
            id="inventory_count"
            class="form-control"
            placeholder="e.g. 50"
          />
        </div>

        <!-- Featured Image -->
        <div class="col-12">
          <label class="form-label fw-semibold">Featured Image</label>
          <input
            type="file"
            id="featuredImageInput"
            class="form-control"
            accept="image/*"
          />
          <input type="hidden" name="featured_image" id="featuredImageUrl" />
          <div id="featuredImagePreview" class="mt-2"></div>
        </div>

        <!-- Additional Images -->
        <div class="col-12">
          <label class="form-label fw-semibold">Additional Images</label>
          <div id="imagesContainer">
            <div class="input-group mb-2">
              <input
                type="file"
                name="image_0"
                class="form-control image-upload"
                accept="image/*"
              />
              <input type="hidden" class="image-url-field" name="image_url_0" />
              <button
                type="button"
                class="btn btn-outline-secondary addImageBtn"
              >
                +
              </button>
            </div>
          </div>
          <small class="text-muted">Click + to add more image fields.</small>
        </div>

        <!-- Publish Toggle -->
        <div class="col-12">
          <div class="form-check form-switch">
            <input
              class="form-check-input"
              type="checkbox"
              id="isPublished"
              name="is_published"
              checked
            />
            <label class="form-check-label" for="isPublished"
              >Publish this product</label
            >
          </div>
        </div>

        <!-- Submit -->
        <div class="col-12 text-end mt-4">
          <button type="submit" class="btn btn-primary px-5">
            Save Product
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock content %} {% block script %}
<script type="module" src="{% static 'js/addProduct.js' %}"></script>
{% endblock script %}
