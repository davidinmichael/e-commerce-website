{% extends "base.html" %} {% load static %} {% block content %}

<div class="container-xxl py-5">
  <div class="container">
    <div class="row g-5">
      <!-- Product Images -->
      <div class="col-lg-6">
        <div class="position-relative">
          <img
            src="{{ product.featured_image }}"
            class="img-fluid rounded shadow-sm w-100"
            alt="{{ product.title }}"
          />
        </div>

        {% if product.images %}
        <div class="d-flex flex-wrap mt-3 gap-2">
          {% for img in product.images %}
          <img
            src="{{ img }}"
            class="rounded border"
            alt="{{ product.title }} image"
            style="
              width: 80px;
              height: 80px;
              object-fit: cover;
              cursor: pointer;
            "
          />
          {% endfor %}
        </div>
        {% endif %}
      </div>

      <!-- Product Details -->
      <div class="col-lg-6">
        <h2 class="fw-bold mb-3">{{ product.title }}</h2>
        <p class="text-muted mb-2">
          Category: <span class="fw-semibold">{{ product.category.name }}</span>
        </p>

        <div class="d-flex align-items-center mb-3">
          <h3 class="text-primary fw-bold mb-0 me-3">₦{{ product.price }}</h3>
          {% if product.discount > 0 %}
          <span class="badge bg-success px-3 py-2"
            >{{ product.discount }}% OFF</span
          >
          {% endif %}
        </div>

        <p class="text-muted">{{ product.description }}</p>

        {% if product.features %}
        <h5 class="mt-4 mb-2">Key Features:</h5>
        <ul class="list-unstyled">
          {% for feature in product.features %}
          <li class="mb-1">
            <i class="bi bi-check-circle text-primary me-2"></i>{{ feature }}
          </li>
          {% endfor %}
        </ul>
        {% endif %}

        <div class="mt-4">
          <button class="btn btn-dark me-2 px-4 py-2">Add to Cart</button>
          {% if ENABLE_ONLINE_PAYMENTS %}
          <a href="#" class="btn btn-outline-dark px-4 py-2">Buy Now</a>
          {% else %}
          <a
            href="{{ whatsapp_link }}"
            target="_blank"
            class="btn btn-outline-dark px-4 py-2"
          >
            Buy Now!
          </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container-xxl py-5">
  <div class="container">
    <h2 class="fw-bold mb-4">Related Products</h2>
    <div class="row g-4">
      {% for product in related_products %}
      <div class="col-lg-4 col-md-6 mb-4">
        <div class="card border-0 shadow-sm d-flex flex-column h-100">
          <div class="position-relative overflow-hidden">
            <img
              src="{{product.featured_image}}"
              class="card-img-top"
              alt="${product.title}"
            />
          </div>

          <div class="card-body d-flex flex-column justify-content-between p-4">
            <div>
              <h5 class="card-title mb-2">{{product.title}}</h5>
              <p class="text-primary fw-bold mb-3">₦{{product.price}}</p>
            </div>

            <div class="d-flex gap-2 align-items-stretch mt-3">
              <a
                href="{% url 'product_detail' product.slug %}"
                class="btn btn-outline-dark d-flex align-items-center justify-content-center flex-fill view-details-btn"
                role="button"
              >
                View Details
              </a>

              <button
                class="btn btn-dark d-flex align-items-center justify-content-center flex-fill add-to-cart-btn"
                data-id="{{product.id}}"
                type="button"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock content %}
